<!DOCTYPE html>
<html lang="en">
	<head>
	<link rel="stylesheet" type="text/css" href="stylesheet.css">
		<meta charset="utf-8">
		<title>G Admission</title>
		<script type="text/javascript" src="d3.js"></script>	
	</head>
	<body style:"background-color:lightgray">
		<h1 style="text-align:center;">A web page to support graduate admission</h1>
		<h2 style="text-align:center;">IE5900 Data Visualization Hw2</h2>

		<table align=center>
			<tbody>
				<tr>
					<th>Name</th><th>GPA</th><th>GRE V</th><th>GRE Q</th><th>Essay</th><th>Recom</th>
				</tr>
			</tbody>
		</table>

		<script type="text/javascript">
			d3.json("https://hivelab.org/static/students.json", function(data) {
		    		var gpa=[9999,0];	//First argument will be min, second max
		    		var grev=[9999,0];
		    		var greq=[9999,0];
		    		var essay=[9999,0];
		    		var recom=[9999,0];
		    		for (var i=0; i<data.length;i++){
		    			if(data[i].GPA<gpa[0]){gpa[0]=data[i].GPA;}
		    			if(data[i].GPA>gpa[1]){gpa[1]=data[i].GPA;}
		    			if(data[i].GRE_V<grev[0]){grev[0]=data[i].GRE_V;}
		    			if(data[i].GRE_V>grev[1]){grev[1]=data[i].GRE_V;}
		    			if(data[i].GRE_Q<greq[0]){greq[0]=data[i].GRE_Q;}
		    			if(data[i].GRE_Q>greq[1]){greq[1]=data[i].GRE_Q;}
		    			if(data[i].Essay<essay[0]){essay[0]=data[i].Essay;}
		    			if(data[i].Essay>gpa[1]){essay[1]=data[i].Essay;}
		    			if(data[i].Recom<recom[0]){recom[0]=data[i].Recom;}
		    			if(data[i].Recom>recom[1]){recom[1]=data[i].Recom;}
		    		}
		    		
		    		for (var i = 0; i <data.length; i++) {
						var estudiante=d3.select("tbody").append("tr");
						estudiante.append("td").text(data[i].Name)
						//Insert GPA
						if(data[i].GPA==gpa[0]){
							estudiante.append("td").text(data[i].GPA+"*").attr("class","low");	
						}
						else if(data[i].GPA==gpa[1]){
							estudiante.append("td").text(data[i].GPA+"**").attr("class","top");		
						}
						else{
							estudiante.append("td").text(data[i].GPA);	
						}
						//Insert GRE V
						if(data[i].GRE_V==grev[0]){
							estudiante.append("td").text(data[i].GRE_V+"*").attr("class","low");	
						}
						else if(data[i].GRE_V==grev[1]){
							estudiante.append("td").text(data[i].GRE_V+"**").attr("class","top");		
						}
						else{
							estudiante.append("td").text(data[i].GRE_V);	
						}
						//Insert GRE Q
						if(data[i].GRE_Q==greq[0]){
							estudiante.append("td").text(data[i].GRE_Q+"*").attr("class","low");	
						}
						else if(data[i].GRE_Q==greq[1]){
							estudiante.append("td").text(data[i].GRE_Q+"**").attr("class","top");		
						}
						else{
							estudiante.append("td").text(data[i].GRE_Q);	
						}
						//Insert Essay
						if(data[i].Essay==essay[0]){
							estudiante.append("td").text(data[i].Essay+"*").attr("class","low");	
						}
						else if(data[i].Essay==essay[1]){
							estudiante.append("td").text(data[i].Essay+"**").attr("class","top");		
						}
						else{
							estudiante.append("td").text(data[i].Essay);	
						}//Insert Recom
						if(data[i].Recom==recom[0]){
							estudiante.append("td").text(data[i].Recom+"*").attr("class","low");	
						}
						else if(data[i].Recom==recom[1]){
							estudiante.append("td").text(data[i].Recom+"**").attr("class","top");		
						}
						else{
							estudiante.append("td").text(data[i].Recom);	
						}
						};
			d3.select("tbody").append("tr").text("* Lowest score").attr("style", "background-color:white; border-color: white;")
			d3.select("tbody").append("tr").text("** Highest score").attr("style", "background-color:white; border-color: white;")
			});
		</script>

	</body>
</html>
